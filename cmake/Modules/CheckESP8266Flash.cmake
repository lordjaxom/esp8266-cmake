set(ESP8266_FLASH "512k0" CACHE STRING "The flash memory layout of the ESP8266")

set(ESP8266_FLASH_VALUES 
        "512k0" "512k64" "512k128" "1m64" "1m128" "1m144" "1m160" "1m192" "1m256" "1m512"
        "2m" "4m" "4m1m" "8m" "16m")
set_property(CACHE ESP8266_FLASH PROPERTY STRINGS "${ESP8266_FLASH_VALUES}")

if ("${ESP8266_FLASH}" STREQUAL "")
    message(FATAL_ERROR "ESP8266_FLASH is not set")
endif ()
        
if ("${ESP8266_FLASH}" MATCHES "^512[kK](0[kK]?)?")
    set(ESP8266_FLASH_SIZE "512K")
    set(ESP8266_FLASH_LAYOUT "512k0")
elseif ("${ESP8266_FLASH}" MATCHES "512[kK]64[kK]")
    set(ESP8266_FLASH_SIZE "512K")
    set(ESP8266_FLASH_LAYOUT "512k64")
elseif ("${ESP8266_FLASH}" MATCHES "512k128[kK]")
    set(ESP8266_FLASH_SIZE "512K")
    set(ESP8266_FLASH_LAYOUT "512k128")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]64[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m64")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]128[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m128")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]144[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m144")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]160[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m160")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]192[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m192")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]256[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m256")
elseif ("${ESP8266_FLASH}" MATCHES "1[mM]512[kK]")
    set(ESP8266_FLASH_SIZE "1M")
    set(ESP8266_FLASH_LAYOUT "1m512")
elseif ("${ESP8266_FLASH}" MATCHES "2[mM](0[kK]?)?")
    set(ESP8266_FLASH_SIZE "2M")
    set(ESP8266_FLASH_LAYOUT "2m")
elseif ("${ESP8266_FLASH}" MATCHES "4[mM](0[kK]?)?")
    set(ESP8266_FLASH_SIZE "4M")
    set(ESP8266_FLASH_LAYOUT "4m")
elseif ("${ESP8266_FLASH}" MATCHES "4[mM]1[mM]")
    set(ESP8266_FLASH_SIZE "4M")
    set(ESP8266_FLASH_LAYOUT "4m1m")
elseif ("${ESP8266_FLASH}" MATCHES "8[mM](0[kK]?)?")
    set(ESP8266_FLASH_SIZE "8M")
    set(ESP8266_FLASH_LAYOUT "8m")
elseif ("${ESP8266_FLASH}" MATCHES "16[mM](0[kK]?)?")
    set(ESP8266_FLASH_SIZE "16")
    set(ESP8266_FLASH_LAYOUT "16")
else()
    message(FATAL_ERROR "Unknown value ${ESP8266_FLASH} for ESP8266_FLASH")
endif()
